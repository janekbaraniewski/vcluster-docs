---
title: RBAC
sidebar_label: rbac
sidebar_position: 7
description: Configuration for ...
---

import RBAC from '../../_partials/config/rbac.mdx'

Most rules required to operate your vCluster are automatically generated by [enabling resource syncing](../vcluster-yaml/sync/).

<!-- vale off -->

:::note
When enabled, the following configuration fields modify the default behavior:

- [`controlPlane.advanced.virtualScheduler`](../vcluster-yaml/control-plane/other/advanced/virtual-scheduler.mdx): Adds required read permissions for the virtual scheduler.
- [`networking.replicateServices.fromHost`](../vcluster-yaml/networking/replicate-services.mdx): Adds required permissions to manage endpoints and services.
- [`integrations.metrics.proxy.nodes`](../../integrations/metrics/metrics-server.mdx): Adds required read permissions for node resources.
- [`plugins`](../vcluster-yaml/plugins.mdx): Adds `roles` and `clusterRoles` defined by each plugin.
- [`sync.toHost.namespaces`](../vcluster-yaml/sync/to-host/advanced/namespaces.mdx): Adds required permissions for vCluster to manage namespaces and service accounts.
:::

## Disable RBAC

In environments with strict controls where users cannot create service accounts, you may configure vCluster to use a managed service account. An administrator would be responsible for managing the Role, RoleBinding, ClusterRole, ClusterRoleBinding, and ServiceAccount resources. After you create these, update the `vcluster.yaml` to disable RBAC, and configure the control plane to use the managed ServiceAccount:

```yaml
controlPlane:
  advanced:
    serviceAccount:
      name: custom-vc-sa
rbac:
  role:
    enabled: false
  clusterRole:
    enabled: false
```

Alternatively, you can disable `ClusterRole` creation—this is often necessary when users don’t have permission to create `ClusterRole` resources:

```yaml
rbac:
  clusterRole:
    enabled: false
```

## Additional rules

Configure extra rules for when the automatically generated rules, [plugin](../vcluster-yaml/plugins.mdx) rules are insufficient. The usage of `extraRules` should be rare, but this example shows its usage:

```yaml
rbac:
  role:
    enabled: true
    extraRules:
      - apiGroups: [""]
        resources: ["pods/status", "pods/ephemeralcontainers"]
        verbs: ["patch", "update"]
```

## Overwrite rules

For more control over permissions, use `overwriteRules` to disable the default rules generated by the vCluster Helm chart.

When `overwriteRules` is enabled, you must manually define all required rules for the vCluster and its plugins to function. This approach can simplify permission management by allowing the Helm chart to still create the `Role`, `RoleBinding`, and `ServiceAccount`, while you retain full control over the rules.

The following example disables cluster-wide rules and specifies namespace-level permissions:


```yaml
rbac:
  role:
    enabled: true
    overwriteRules:
      - apiGroups: [""]
        resources: ["pods/status", "pods/ephemeralcontainers"]
        verbs: ["patch", "update"]
  clusterRole:
    enabled: false
```

## Config reference

<RBAC/>
